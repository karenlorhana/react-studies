var e=require("fp-ts/lib/Either"),r=require("fp-ts/function"),t=require("@hookform/resolvers"),n=require("io-ts"),o=require("fp-ts/ReadonlyArray"),u=require("fp-ts/Option"),i=require("fp-ts/Either"),a=require("fp-ts/Semigroup"),p=require("fp-ts/ReadonlyRecord");function f(){return(f=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var c=function(e){return e.reduce(function(e,t,n){return r.pipe(t,i.fold(function(e){return(n>0?".":"")+e},function(e){return"["+e+"]"}),function(r){return""+e+r})},"")},s=function(e){var t,a=r.pipe(t=e.context,o.filterMapWithIndex(function(e,r){var o=e-1;return void 0===t[o]||t[o].type instanceof n.TaggedUnionType||t[o].type instanceof n.UnionType||t[o].type instanceof n.IntersectionType?u.none:u.some(r)}),o.map(function(e){return e.key}),o.map(function(e){return r.pipe(e,function(e){return parseInt(e,10)},i.fromPredicate(r.not(Number.isNaN),function(){return e}))}),o.toArray,c);return{message:r.pipe(e.message,i.fromNullable(e.context),i.mapLeft(r.flow(o.last,u.map(function(e){return"expected "+e.type.name+" but got "+JSON.stringify(e.actual)}),u.getOrElseW(function(){return r.absurd("Error context is missing name")}))),i.getOrElseW(r.identity)),type:r.pipe(e.context,o.last,u.map(function(e){return e.type.name}),u.getOrElse(function(){return"unknown"})),path:a}},l=function(e){return r.pipe(e,o.map(function(e){var r;return(r={})[e.path]={type:e.type,message:e.message},r}),function(e){return a.fold({concat:function(e,r){return Object.assign({},r,e)}})({},e)})},m={concat:function(e,r){var t;return f({},r,{types:f({},e.types,(t={},t[e.type]=e.message,t[r.type]=r.message,t))})}},y=function(e){return r.pipe(p.fromFoldableMap(m,o.Foldable)(e,function(e){return[e.path,e]}),p.map(function(e){return function(e,r){if(null==e)return{};var t,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)r.indexOf(t=u[n])>=0||(o[t]=e[t]);return o}(e,["path"])}))};exports.ioTsResolver=function(n){return function(u,i,a){return r.pipe(u,n.decode,e.mapLeft((p="all"===a.criteriaMode,function(e){var t=p?y:l;return r.pipe(e,o.map(s),t)})),e.mapLeft(function(e){return t.toNestError(e,a.fields)}),e.fold(function(e){return{values:{},errors:e}},function(e){return{values:e,errors:{}}}));var p}};
//# sourceMappingURL=io-ts.js.map
