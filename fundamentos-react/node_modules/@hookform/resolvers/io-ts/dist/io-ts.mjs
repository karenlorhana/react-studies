import{mapLeft as t,fold as n}from"fp-ts/lib/Either";import{pipe as r,not as e,flow as o,absurd as u,identity as i}from"fp-ts/function";import{toNestError as f}from"@hookform/resolvers";import{TaggedUnionType as c,UnionType as a,IntersectionType as s}from"io-ts";import{map as p,filterMapWithIndex as m,toArray as y,last as l,Foldable as g}from"fp-ts/ReadonlyArray";import{none as v,some as d,map as h,getOrElseW as O,getOrElse as b}from"fp-ts/Option";import{fold as x,fromPredicate as j,fromNullable as k,mapLeft as E,getOrElseW as N}from"fp-ts/Either";import{fold as R}from"fp-ts/Semigroup";import{fromFoldableMap as w,map as S}from"fp-ts/ReadonlyRecord";function A(){return(A=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t}).apply(this,arguments)}var I=function(t){return t.reduce(function(t,n,e){return r(n,x(function(t){return(e>0?".":"")+t},function(t){return"["+t+"]"}),function(n){return""+t+n})},"")},J=function(t){var n,f=r(n=t.context,m(function(t,r){var e=t-1;return void 0===n[e]||n[e].type instanceof c||n[e].type instanceof a||n[e].type instanceof s?v:d(r)}),p(function(t){return t.key}),p(function(t){return r(t,function(t){return parseInt(t,10)},j(e(Number.isNaN),function(){return t}))}),y,I);return{message:r(t.message,k(t.context),E(o(l,h(function(t){return"expected "+t.type.name+" but got "+JSON.stringify(t.actual)}),O(function(){return u("Error context is missing name")}))),N(i)),type:r(t.context,l,h(function(t){return t.type.name}),b(function(){return"unknown"})),path:f}},L=function(t){return r(t,p(function(t){var n;return(n={})[t.path]={type:t.type,message:t.message},n}),function(t){return R({concat:function(t,n){return Object.assign({},n,t)}})({},t)})},M={concat:function(t,n){var r;return A({},n,{types:A({},t.types,(r={},r[t.type]=t.message,r[n.type]=n.message,r))})}},P=function(t){return r(w(M,g)(t,function(t){return[t.path,t]}),S(function(t){return function(t,n){if(null==t)return{};var r,e,o={},u=Object.keys(t);for(e=0;e<u.length;e++)n.indexOf(r=u[e])>=0||(o[r]=t[r]);return o}(t,["path"])}))},W=function(e){return function(o,u,i){return r(o,e.decode,t((c="all"===i.criteriaMode,function(t){var n=c?P:L;return r(t,p(J),n)})),t(function(t){return f(t,i.fields)}),n(function(t){return{values:{},errors:t}},function(t){return{values:t,errors:{}}}));var c}};export{W as ioTsResolver};
//# sourceMappingURL=io-ts.module.js.map
